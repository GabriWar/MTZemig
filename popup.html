<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MTZemig</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <div class="container">
    <h2>MTZemig</h2>

    <!-- Captured Bill Data Section -->
    <div id="captured-data-section" class="hidden">
      <div class="section-header">
        <h3>Dados da Fatura</h3>
        <div style="display: flex; gap: 8px;">
          <button id="toggle-debug-btn" class="btn-small" title="Ver/Ocultar Debug">Debug</button>
          <button id="toggle-json-btn" class="btn-small" title="Ver/Ocultar JSON">JSON</button>
          <button id="copy-json-btn" class="btn-small" title="Copiar JSON">Copiar</button>
        </div>
      </div>

      <div id="debug-view" class="hidden" style="margin-bottom: 12px;">
        <pre id="debug-info" style="white-space: pre-wrap; word-wrap: break-word; background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 4px; font-size: 13px; max-height: 400px; overflow-y: auto; color: #ddd; line-height: 1.5;"></pre>
      </div>

      <div id="json-view" class="hidden" style="margin-bottom: 12px;">
        <pre id="json-full" style="white-space: pre-wrap; word-wrap: break-word; background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 4px; font-size: 12px; max-height: 400px; overflow-y: auto; color: #ddd; line-height: 1.5;"></pre>
      </div>

      <div class="bill-header" id="bill-header"></div>

      <div class="card">
        <h4>Dados Extraídos</h4>
        <div class="form-group inline">
          <label for="tipo-ligacao">Tipo Ligação</label>
          <select id="tipo-ligacao">
            <option value="100" selected>Trifásico</option>
            <option value="50">Bifásico</option>
            <option value="30">Monofásico</option>
          </select>
        </div>
        <div class="data-grid" id="extracted-data"></div>
      </div>

      <div class="card">
        <h4>Resumo</h4>
        <div class="data-grid" id="summary-data"></div>
      </div>

      <div class="card">
        <h4>Cálculo de Desconto</h4>
        <div class="form-group">
          <label for="desconto">% de Desconto (Desconto MTZ)</label>
          <input type="number" id="desconto" value="30" placeholder="Ex: 30">
        </div>
        <div class="data-grid" id="discount-data"></div>
      </div>

      <div class="card">
        <h4>Gerar Documento</h4>
        <div id="selected-account-info" class="data-item full-width" style="margin-bottom: 12px;">
          <span class="data-label">Selecione uma conta abaixo para gerar o documento</span>
        </div>
        <div id="meses-gerados" class="hidden" style="margin-bottom: 12px;">
          <span class="data-label" style="margin-bottom: 8px; display: block;">Meses Gerados</span>
          <div class="meses-grid">
            <label class="mes-check"><input type="checkbox" data-mes="1"><span>Jan</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="2"><span>Fev</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="3"><span>Mar</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="4"><span>Abr</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="5"><span>Mai</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="6"><span>Jun</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="7"><span>Jul</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="8"><span>Ago</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="9"><span>Set</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="10"><span>Out</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="11"><span>Nov</span></label>
            <label class="mes-check"><input type="checkbox" data-mes="12"><span>Dez</span></label>
          </div>
        </div>
        <button id="generate-doc-btn" class="btn success" disabled>Gerar Documento</button>
      </div>
    </div>

    <!-- Account List -->
    <h3 style="margin: 16px 0 8px 0; color: #00d9a5; font-size: 14px;">Contas:</h3>
    <div class="form-group" style="margin-bottom: 12px;">
      <input type="text" id="search-accounts" placeholder="Buscar contas...">
    </div>
    <div id="account-list" class="account-list"></div>

    <div class="button-group">
      <button id="export-btn" class="btn info">Exportar Contas</button>
      <button id="import-btn" class="btn info">Importar Contas</button>
    </div>

    <button id="show-add-form-btn" class="btn primary">Adicionar Nova Conta</button>

    <div id="import-form" class="hidden">
      <h3>Importar Contas</h3>
      <div class="form-group">
        <label for="json-import">Cole o JSON aqui</label>
        <textarea id="json-import" rows="8" placeholder='[{"user":"exemplo@email.com","pass":"senha123",...}]'></textarea>
      </div>
      <div class="form-actions">
        <button id="import-confirm-btn" class="btn success">Importar</button>
        <button id="import-cancel-btn" class="btn secondary">Cancelar</button>
      </div>
    </div>

    <div id="add-account-form" class="hidden">
      <h3 id="form-title">Nova Conta</h3>
      <div class="form-group">
        <label for="username">Usuário / Email</label>
        <input type="text" id="username" placeholder="Digite o usuário">
      </div>
      <div class="form-group">
        <label for="password">Senha</label>
        <input type="password" id="password" placeholder="Digite a senha">
      </div>
      <hr style="border-color: rgba(255,255,255,0.1); margin: 12px 0;">
      <h4 style="margin: 8px 0; color: #aaa; font-size: 12px;">Dados do Cliente</h4>
      <div class="form-group">
        <label for="acc-nome">Nome do Cliente</label>
        <input type="text" id="acc-nome" placeholder="Ex: Auto Posto Rede Souza Ltda">
      </div>
      <div class="form-group">
        <label for="acc-cnpj">CNPJ/CPF</label>
        <input type="text" id="acc-cnpj" placeholder="Ex: 00.000.000/0001-00">
      </div>
      <div class="form-group">
        <label for="acc-endereco">Endereço</label>
        <input type="text" id="acc-endereco" placeholder="Ex: Rua Exemplo, 123">
      </div>
      <div class="form-group">
        <label for="acc-instalacao">Nº Instalação</label>
        <input type="text" id="acc-instalacao" placeholder="Ex: 3007555282">
      </div>
      <div class="form-group inline">
        <label for="acc-tipo">Tipo Ligação</label>
        <select id="acc-tipo">
          <option value="100" selected>Trifásico</option>
          <option value="50">Bifásico</option>
          <option value="30">Monofásico</option>
        </select>
      </div>
      <div class="form-group">
        <label for="acc-desconto">% Desconto MTZ</label>
        <input type="number" id="acc-desconto" value="30" placeholder="Ex: 30">
      </div>
      <div class="form-group">
        <label for="acc-vencimento">Dia de Vencimento</label>
        <input type="number" id="acc-vencimento" min="1" max="31" placeholder="Ex: 10">
      </div>
      <div class="form-actions">
        <button id="save-btn" class="btn success">Salvar</button>
        <button id="cancel-btn" class="btn secondary">Cancelar</button>
      </div>
    </div>
  </div>
  <script src="popup.js"></script>
</body>

</html>